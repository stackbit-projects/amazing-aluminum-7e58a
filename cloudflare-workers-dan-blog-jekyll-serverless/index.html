<!doctype html>
<html lang="en">
    <head>    

        <title>Cloudflare Workers dan Blog Jekyll Serverless - Stackbit Ampersand Theme</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="<p>Apa itu “Cloudflare Worker” adalah JavaScript yang Anda tulis yang berjalan di edge Cloudflare. “Cloudflare Service Worker” secara khusus adalah pekerja yang menangani lalu lintas HTTP dan ditulis pada Service Worker API. menurut (<a rel="noreferrer noopener" href="https://blog.cloudflare.com/introducing-cloudflare-workers/" target="_blank">cloudflare</a>)</p>

"/>
        <link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700%7CRoboto:400,400i,700,700i&display=swap" rel="stylesheet"> 
        <link rel="stylesheet" href="/assets/css/main.css">
         
        
        
        
        
        
        
    </head>
    <body>
        
          <div id="page" class="site layout-grid palette-green">

    <header id="masthead" class="site-header outer">
  <div class="inner">
    <div class="site-header-inside">

      <div class="site-branding">
        
        
        <p class="site-logo">
          <a href='/'><img src="/images/logo.svg"
            alt="Ampersand Logo" /></a>
        </p>
        
        
        <p class="site-title"><a href='/'>Ampersand</a></p>
        
      </div><!-- .site-branding -->

      
      
      <button id="menu-open" class="menu-toggle"><span class="screen-reader-text">Menu</span><span class="icon-menu"
        aria-hidden="true"></span></button>
      <nav id="main-navigation" class="site-nav" aria-label="Main Navigation">
        <div class="site-nav-inside">
          <button id="menu-close" class="menu-toggle"><span class="screen-reader-text">Menu</span><span class="icon-close"
              aria-hidden="true"></span></button>
          <ul class="menu">
            
              
              
              <li class="menu-item">
                
                
<a href="/"
  
  
  class="">
  
    Home
  
</a>

              </li>
            
              
              
              <li class="menu-item">
                
                
<a href="/about"
  
  
  class="">
  
    About
  
</a>

              </li>
            
              
              
              <li class="menu-item">
                
                
<a href="/style-guide"
  
  
  class="">
  
    Style Guide
  
</a>

              </li>
            
              
              
              <li class="menu-item">
                
                
<a href="/contact"
  
  
  class="">
  
    Contact
  
</a>

              </li>
            
          </ul><!-- .menu -->
        </div><!-- .site-nav-inside -->
      </nav><!-- .site-navigation -->
      

    </div><!-- .site-header-inside -->
  </div><!-- .inner -->
</header><!-- .site-header -->


    <div id="content" class="site-content outer">
      <main id="main" class="site-main inner">

          <article class="post post-full">
    <header class="post-header inner-md">
      <div class="post-meta">
        <time class="published"
          datetime="2020-11-18 12:27">Wednesday, November 18, 2020</time>
      </div>
      <h1 class="post-title">Cloudflare Workers dan Blog Jekyll Serverless</h1>
      
      
    </header><!-- .post-header -->
    
    
    <div class="post-content inner-md">
      <p>Apa itu “Cloudflare Worker” adalah JavaScript yang Anda tulis yang berjalan di edge Cloudflare. “Cloudflare Service Worker” secara khusus adalah pekerja yang menangani lalu lintas HTTP dan ditulis pada Service Worker API. menurut (<a rel="noreferrer noopener" href="https://blog.cloudflare.com/introducing-cloudflare-workers/" target="_blank">cloudflare</a>)</p>

<h2 id="apa-itu-workers">Apa itu Workers</h2>

<p>Sebelumnya pernah kenal workers ini pada awalnya ketika menerapkan PWA pada blog, jika memasang plugin superPWA di wordpress, maka akan ada script service-workers.js di root folder, gunanya untuk menjalankan pwa, menyimpan cache website yang sudah terdownload di browser pengguna.</p>

<p>Akibatnya website bisa diakses tanpa internet sekalipun, dan memberi respon 200 OK di header, selama cache masih tersimpan dan website bisa diakses tanpa jaringan internet, selain itu mempercepat loading blog dan banyak manfaat lainnya.</p>

<p>Akhir ini sering mencoba blog static atau lebih dikenal SSG (static site generator) seperti Jekyll, Hugo, Hexo, Vuepress, Gatsby dan banyak macamnya, kelebihannya memang banyak dibandingkan dengan website dinamis seperti wordpress yang membutuhkan proses data setiap saat, database terus-terusan berkerja.</p>

<p>Sedangkan SSG hanya menghasilkan static file tanpa perlu database atau query yang tertulis setiap saat, kecepatan loading lebih mantap, jika di wordpress perlu waktu banyak untuk tuning agar kecepatan menjadi optimal, seperti memasang plugin cache, dan optimisasi file css, html dan javascript.</p>

<p>Setelah mencoba static blog seperti hugo lalu mencoba jekyll karena langsung terintegrasi langsug dengan github pages, memang waktu deploy antara jekyll dan hugo sangat berbeda jauh, hugo hanya membutuhkan waktu 22 detik, sedangkan jekyll membutuhkan satu menit, tergantung seberapa besar file juga.</p>

<p>Iseng-iseng mencoba cloudflare workers, ada dua paket bundle plan bisa langsung membuat workers site dengan wrangler, tapi kalo mau coba gratis bisa mendapatkan workers dengan limitasi 100k request perhari dan mendapatkan KV storage sebesar 1 GB.</p>

<h2 id="membuat-workers">Membuat Workers</h2>

<p>Jadi karena hanya ingin coba-coba dengan workers milih yang gratis saja hehe, cara membuat workers cukup mudah.</p>

<ul>
  <li>masuk ke dashbord cloudflare</li>
  <li>pilih menu workers</li>
  <li>pilih manage workers</li>
  <li>lalu pilih create workers</li>
</ul>

<p>Setelah berhasil membuat workers maka kalian akan mendapatkan subdomain untuk mengakses workes yang kalian buat seperti blablabla.workers.dev, selanjutnya membuat script javascript untuk memerintahkan workers.</p>

<p>Contoh template workers bisa diakses <a rel="noreferrer noopener" href="https://developers.cloudflare.com/workers/examples" data-type="URL" data-id="https://developers.cloudflare.com/workers/examples" target="_blank">disini</a> atau bisa kunjungi halaman build with workers <a rel="noreferrer noopener" href="https://workers.cloudflare.com/built-with/" data-type="URL" data-id="https://workers.cloudflare.com/built-with/" target="_blank">disini</a>.</p>

<p>Percobaan kali ini dengan blog static yang pernah saya buat dengan Jekyll, pilih quick edit dan masukan perintah js di workers, dibawah ini ganti alamat domain idan.my.id dengan alamat domain kalian.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">async</span> <span class="k">function</span> <span class="nf">handleRequest</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>

<span class="k">const</span> <span class="no">url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">request</span><span class="o">.</span><span class="nx">url</span><span class="p">)</span>

<span class="c1">// Where to proxy the requests through to</span>
<span class="k">const</span> <span class="no">origin</span> <span class="o">=</span> <span class="s1">'https://idan.my.id'</span><span class="p">;</span>

<span class="c1">// We want to send any redirects back to the client,</span>
<span class="c1">// not follow them here.</span>
<span class="k">const</span> <span class="no">fetch_opts</span> <span class="o">=</span> <span class="p">{</span>
<span class="nx">redirect</span><span class="o">:</span> <span class="s1">'manual'</span>
<span class="p">}</span>

<span class="c1">// Fetch the destination and respond</span>
<span class="k">return</span> <span class="nx">fetch</span><span class="p">(</span><span class="nx">origin</span> <span class="o">+</span> <span class="nx">url</span><span class="o">.</span><span class="nx">pathname</span><span class="p">,</span> <span class="nx">fetch_opts</span><span class="p">)</span>
<span class="p">}</span>

<span class="nx">addEventListener</span><span class="p">(</span><span class="s1">'fetch'</span><span class="p">,</span> <span class="nx">event</span> <span class="o">=&gt;</span> <span class="p">{</span>
<span class="nx">event</span><span class="o">.</span><span class="nx">respondWith</span><span class="p">(</span><span class="nx">handleRequest</span><span class="p">(</span><span class="nx">event</span><span class="o">.</span><span class="nx">request</span><span class="p">))</span>
<span class="p">})</span>
</code></pre></div></div>

<p><img loading="lazy" width="768" height="432" src="https://i2.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers-site.png?resize=768%2C432&amp;ssl=1" alt="" class="wp-image-8642" srcset="https://i2.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers-site.png?resize=1024%2C576&amp;ssl=1 1024w, https://i2.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers-site.png?resize=300%2C169&amp;ssl=1 300w, https://i2.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers-site.png?resize=150%2C84&amp;ssl=1 150w, https://i2.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers-site.png?resize=768%2C432&amp;ssl=1 768w, https://i2.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers-site.png?resize=373%2C210&amp;ssl=1 373w, https://i2.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers-site.png?w=1366&amp;ssl=1 1366w" sizes="(max-width: 768px) 100vw, 768px" data-recalc-dims="1" /> &lt;/figure&gt;</p>

<p>Lalu test dengan klik send dan sampai mendapatkan repon 200 OK, halaman berhasil, lalu klik save and deploy, sudah workers berhasil dibuat.</p>

<h2 id="menghungkan-workers-dengan-domain">Menghungkan workers dengan domain</h2>

<p>Selanjutnya hubungkan workers dengan domain kalian, dengan kembali ke menu utama workers dan pilih add route masukan nama domain yang ingin dihubungkan dengan workers.</p>

<p>Sebagai contoh disini saya membuat halaman workers di alamat https://idan.aep.workers.dev lalu dihubungkan ke alamat blog https://idan.my.id sudah selamat menikmati serverless.</p>

<p>Dan hasilnya cukup memuaskan ketika cek di pagesepeed, kebetulan blog jekyll tanpa optimisasi awalnya cukup lama jadi cepat.<figure class="wp-block-image size-large"></figure></p>

<p><img loading="lazy" width="768" height="432" src="https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/serverless.png?resize=768%2C432&amp;ssl=1" alt="" class="wp-image-8637" srcset="https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/serverless.png?resize=1024%2C576&amp;ssl=1 1024w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/serverless.png?resize=300%2C169&amp;ssl=1 300w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/serverless.png?resize=150%2C84&amp;ssl=1 150w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/serverless.png?resize=768%2C432&amp;ssl=1 768w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/serverless.png?resize=373%2C210&amp;ssl=1 373w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/serverless.png?w=1366&amp;ssl=1 1366w" sizes="(max-width: 768px) 100vw, 768px" data-recalc-dims="1" /> &lt;/figure&gt;</p>

<p>Berikut konsumsi cpu time pada workers<figure class="wp-block-image size-large"></figure></p>

<p><img loading="lazy" width="768" height="432" src="https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers.png?resize=768%2C432&amp;ssl=1" alt="" class="wp-image-8638" srcset="https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers.png?resize=1024%2C576&amp;ssl=1 1024w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers.png?resize=300%2C169&amp;ssl=1 300w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers.png?resize=150%2C84&amp;ssl=1 150w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers.png?resize=768%2C432&amp;ssl=1 768w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers.png?resize=373%2C210&amp;ssl=1 373w, https://i0.wp.com/wildanfauzy.com/wp-content/uploads/2020/11/workers.png?w=1366&amp;ssl=1 1366w" sizes="(max-width: 768px) 100vw, 768px" data-recalc-dims="1" /> &lt;/figure&gt;</p>

<p>Selanjutnya mau coba bikin workers site denga wrangler, mungkin cukup sekian membahas tentang workers dan serverless, terima kasih.</p>

    </div><!-- .post-content -->
  </article><!-- .post -->

  <!-- Next/previous post navigation TBD -->
  <!--
  <nav class="post-navigation">
    <h2 class="post-nav-title">Read Next</h2>
    <div class="post-feed">
      <article class="post post-card">
        <div class="post-card-inside">
          <a class="post-card-thumbnail" href="#">
            <img class="thumbnail" src="#" alt="" />
          </a>
          <div class="post-card-content">
            <header class="post-header">
              <div class="post-meta">
                <time class="published" datetime="">Previous post date</time>
              </div>
              <h3 class="post-title"><a href="#" rel="bookmark">Previous Post Title</a></h3>
            </header>
            <div class="post-excerpt">
              <p>Previous post excerpt</p>
              <p class="read-more">
                <a class="button button-secondary" href="#">Read more</a>
              </p>
            </div>
          </div>
        </div>
      </article>
      <article class="post post-card">
        <div class="post-card-inside">
          <a class="post-card-thumbnail" href="#">
            <img class="thumbnail" src="#" alt="" />
          </a>
          <div class="post-card-content">
            <header class="post-header">
              <div class="post-meta">
                <time class="published" datetime="">Next post date</time>
              </div>
              <h3 class="post-title"><a href="#" rel="bookmark">Next Post Title</a></h3>
            </header>
            <div class="post-excerpt">
              <p>Next post excerpt</p>
              <p class="read-more">
                <a class="button button-secondary" href="#">Read more</a>
              </p>
            </div>
          </div>
        </div>
      </article>
    </div>
  </nav>
  -->


      </main><!-- .site-main -->
    </div><!-- .site-content -->

    
    
      <section class="subscribe outer">
  <div class="inner-sm">
    
    
    <h2 class="subscribe-title">Subscribe for new updates</h2>
    
    
    
    <p class="subscribe-text">
      Subscribe to my email newsletter to receive useful articles and special offers. This monthly email is sent out on the first of every month.
    </p>
    
    <form name="subscribeForm" action="/subscribe-success" method="POST" data-netlify-honeypot="bot-field" data-netlify="true" class="subscribe-form">
  <div class="screen-reader-text">
    <label>Don't fill this out if you're human: <input name="bot-field" /></label>
  </div>
  <div class="form-group">
    <label>
      <span class="screen-reader-text">Email address</span>
      <input type="email" name="email" placeholder="Your email address" required>
    </label>
  </div>
  <input type="hidden" name="form-name" value="subscribeForm" />
  <button class="button" type="submit">Subscribe</button>
</form><!-- .subscribe-form -->

  </div><!-- inner-sm -->
</section><!-- .subscribe -->

    

    <footer id="colophon" class="site-footer outer">
  <div class="inner">
    <div class="site-footer-inside">
      <div class="site-info">
        
        
        <span class="copyright">&copy; Stackbit. All rights reserved. This Jamstack site was created with <a href="https://www.stackbit.com/?utm_source=deployed-footer" target="_blank" rel="noopener">Stackbit</a>. Create yours <a href="https://app.stackbit.com/create?theme=ampersand&utm_source=deployed-footer" target="_blank" rel="noopener">now</a>.</span>
        
        
      </div><!-- .site-info -->
      
      
      <div class="social-links">
        
          
          
<a href="https://twitter.com/"
   target="_blank"
   rel="noopener "
  class="button button-icon">
  
    <span class="icon fab fa-twitter" aria-hidden="true"></span><span class="screen-reader-text">Twitter</span>
  
</a>

        
          
          
<a href="https://www.instagram.com/"
   target="_blank"
   rel="noopener "
  class="button button-icon">
  
    <span class="icon fab fa-instagram" aria-hidden="true"></span><span class="screen-reader-text">Instagram</span>
  
</a>

        
          
          
<a href="https://github.com/"
   target="_blank"
   rel="noopener "
  class="button button-icon">
  
    <span class="icon fab fa-github" aria-hidden="true"></span><span class="screen-reader-text">GitHub</span>
  
</a>

        
          
          
<a href="https://www.linkedin.com/"
   target="_blank"
   rel="noopener "
  class="button button-icon">
  
    <span class="icon fab fa-linkedin" aria-hidden="true"></span><span class="screen-reader-text">LinkedIn</span>
  
</a>

        
          
          
<a href="https://dev.to/"
   target="_blank"
   rel="noopener "
  class="button button-icon">
  
    <span class="icon fab fa-dev" aria-hidden="true"></span><span class="screen-reader-text">DEV</span>
  
</a>

        
      </div><!-- .social-links -->
      
    </div><!-- .site-footer-inside -->
  </div><!-- .inner -->
</footer><!-- .site-footer -->


  </div><!-- .site -->

        <!-- Scripts -->
        <script src="/assets/js/plugins.js"></script>
        <script src="/assets/js/main.js"></script>
    </body> 
</html>
